<!DOCTYPE html>
<html>
    <head>
        <title>The Snake Game</title>
    
        <!-- STYLES -->
        <style type="text/css">
            html, body {
                height: 100%;
                font-size: 25px;
                font-family: sans-serif;
                overflow: hidden;
            }
            #game {
                text-align: center;
                position: absolute;
                top: 50%;
                left: 50%;
                margin-right: -50%;
                transform: translate(-50%, -50%);
            }
            #playground {
                border: 1px solid black;
            }
            #playground td {
                height: 20px;
                width: 20px;
            }
            #controls {
                padding-top: 5px;
                margin-right: auto;
                margin-left: auto;
            }
            #retry {
                height: 60px;
                width: 100px;
            }
            button {
                height: 60px;
                width: 60px;
                border: 1px solid black;
                outline: none;
            }
            #end_screen {
               display: none;
            }
        </style>

        <!-- SCRIPT -->
        <script type="text/javascript">
            var head = "e9";
            var direction = "right";
            var snake = ["", ""];
            var apple = String.fromCharCode(Math.floor(Math.random()*9+97))+Math.floor(Math.random()*9+1);
            var score = 0;
            var row, col;
            up = function(){
                if (direction !== "down"){
                    window.direction = "up";
                }
            }
            down = function(){
                if (direction !== "up"){
                    window.direction = "down";
                }
            }
            left = function(){
                if (direction !== "right"){
                    window.direction = "left";
                }
            }
            right = function(){
                if (direction !== "left"){
                    window.direction = "right";
                }
            }
            move = function(){
                document.getElementById("score").innerHTML = "Score: "+score;
                document.getElementById(apple).style.backgroundColor = "orange";
                row = head.charCodeAt(0);
                col = head[1];
                snake.push(head);
                if (direction === "up"){
                    if (row == 97){
                        row  = 106;
                    }
                    row--;
                }
                else if (direction === "down"){
                    if (row == 105){
                        row = 96;
                        }
                    row++;
                }
                else if (direction === "left"){
                    if (col == 1){
                        col = 10;
                    }
                    col--;
                }
                else if (direction === "right"){
                    if (col == 9){
                        col = 0;
                    }
                    col++;
                }
                row = String.fromCharCode(row);
                head = row + col;
                document.getElementById(head).style.backgroundColor = "#00d300";
                if (head == apple){
                    do {
                        apple = String.fromCharCode(Math.floor(Math.random()*9+97))+Math.floor(Math.random()*9+1);
                    } while (snake.includes(apple) || snake.includes(head));
                    score++;
                }
                else if (snake.slice(0, snake.length-1).includes(head)){
                    row = String.fromCharCode(row);
                    document.getElementById(head).style.backgroundColor = "red";
                    clearInterval(timer);
                    setTimeout(() => {
                        document.getElementById("playground").style.display = "none";
                        document.getElementById("controls").style.display = "none";
                        document.getElementById("score").style.display = "none";
                        document.getElementById("end_screen").style.display = "block";
                        document.getElementsByTagName("span")[1].innerHTML = score;
                    }, 500);
                    return;
                }
                else {
                    try {
                        document.getElementById(snake[0]).style.backgroundColor = "";
                    }
                    catch {
                        
                    }
                    finally {
                        snake.shift();
                    }
                }
            }
            var timer = setInterval(move, 250);
        </script>
    
    </head>
    <body>
        <div id="game">
            <table id="playground">
                <tr>
                    <td id="a1"></td>
                    <td id="a2"></td>
                    <td id="a3"></td>
                    <td id="a4"></td>
                    <td id="a5"></td>
                    <td id="a6"></td>
                    <td id="a7"></td>
                    <td id="a8"></td>
                    <td id="a9"></td>
                </tr>
                <tr>
                    <td id="b1"></td>
                    <td id="b2"></td>
                    <td id="b3"></td>
                    <td id="b4"></td>
                    <td id="b5"></td>
                    <td id="b6"></td>
                    <td id="b7"></td>
                    <td id="b8"></td>
                    <td id="b9"></td>
                </tr>
                <tr>
                    <td id="c1"></td>
                    <td id="c2"></td>
                    <td id="c3"></td>
                    <td id="c4"></td>
                    <td id="c5"></td>
                    <td id="c6"></td>
                    <td id="c7"></td>
                    <td id="c8"></td>
                    <td id="c9"></td>
                </tr>
                <tr>
                    <td id="d1"></td>
                    <td id="d2"></td>
                    <td id="d3"></td>
                    <td id="d4"></td>
                    <td id="d5"></td>
                    <td id="d6"></td>
                    <td id="d7"></td>
                    <td id="d8"></td>
                    <td id="d9"></td>
                </tr>
                <tr>
                    <td id="e1"></td>
                    <td id="e2"></td>
                    <td id="e3"></td>
                    <td id="e4"></td>
                    <td id="e5"></td>
                    <td id="e6"></td>
                    <td id="e7"></td>
                    <td id="e8"></td>
                    <td id="e9"></td>
                </tr>
                <tr>
                    <td id="f1"></td>
                    <td id="f2"></td>
                    <td id="f3"></td>
                    <td id="f4"></td>
                    <td id="f5"></td>
                    <td id="f6"></td>
                    <td id="f7"></td>
                    <td id="f8"></td>
                    <td id="f9"></td>
                </tr>
                <tr>
                    <td id="g1"></td>
                    <td id="g2"></td>
                    <td id="g3"></td>
                    <td id="g4"></td>
                    <td id="g5"></td>
                    <td id="g6"></td>
                    <td id="g7"></td>
                    <td id="g8"></td>
                    <td id="g9"></td>
                </tr>
                <tr>
                    <td id="h1"></td>
                    <td id="h2"></td>
                    <td id="h3"></td>
                    <td id="h4"></td>
                    <td id="h5"></td>
                    <td id="h6"></td>
                    <td id="h7"></td>
                    <td id="h8"></td>
                    <td id="h9"></td>
                </tr>
                <tr>
                    <td id="i1"></td>
                    <td id="i2"></td>
                    <td id="i3"></td>
                    <td id="i4"></td>
                    <td id="i5"></td>
                    <td id="i6"></td>
                    <td id="i7"></td>
                    <td id="i8"></td>
                    <td id="i9"></td>
                </tr>
            </table>
            <span id="score">Score: 0</span>
            <table id="controls">
                <tr>
                    <td></td>
                    <td><button onclick="up()" style="border-radius:19px 19px 0px 0px;">UP</button></td>
                    <td></td>
                </tr>
                <tr>
                    <td><button onclick="left()" style="border-radius:19px 0px 0px 19px;">LEFT</button></td>
                    <td></td>
                    <td><button onclick="right()" style="border-radius:0px 19px 19px 0px;">RIGHT</button></td>
                </tr>
                <tr>
                    <td></td>
                    <td><button onclick="down()" style="border-radius:0px 0px 19px 19px;">DOWN</button></td>
                    <td></td>
                </tr>
            </table>
            <div id="end_screen">
                <h2>Game over!</h2>Score: <span></span><br><br><button id="retry" onclick="location.reload()">RETRY</button>
            </div>
        </div>
    </body>
</html>